#!/usr/bin/env bash

export FZF_DEFAULT_COMMAND="jira list -q 'assignee = currentUser() AND Sprint in openSprints() AND Sprint not in futureSprints()'"

jira list -l 1 2&> /dev/null || jira login

task=$(fzf)
[ $? -eq 0 ] || exit 1

issue=$(echo $task | cut -d: -f1)

echo -n $issue-
read suffix

branch="$issue-$suffix"

git checkout -b $branch
